<div class="login-card-logoBox">
  <img [lazyLoad]="getLogoUrl(1)" class="cl-logoImage rounded" [alt]="settings.webName">
    
    <a [routerLink]="['/']" >
        {{ settings.webName }}
    </a>
</div>

<div class="login-card-alert" *ngIf="this.outputMessage?.length > 0">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 25 23">
        <path fill="currentColor" fill-rule="evenodd"
            d="M9.5 2A3.2 3.2 0 0 1 15 2l9 15.8a3.2 3.2 0 0 1-2.8 4.8H3.3c-2.4 0-4-2.6-2.8-4.8L9.5 2Zm4.4 15.8a1.6 1.6 0 1 1-3.2 0 1.6 1.6 0 0 1 3.2 0ZM12.3 5a1.6 1.6 0 0 0-1.6 1.6v4.8a1.6 1.6 0 0 0 3.2 0V6.6A1.6 1.6 0 0 0 12.3 5Z"
            clip-rule="evenodd"></path>
    </svg>
    <div class="alertText-container">
        <p>{{ this.outputMessage | translate }}</p>
    </div>
</div>


<div class="login-card-header" *ngIf="!isPasswordChanged">
    <h1> {{ "Change password" | translate }}</h1>

</div>
<div class="identityPreview" *ngIf="!isPasswordChanged">
    <div class="product-review-user-avatar">
        <div class="thumb" style="width: 24px; height: 24px;" [ngStyle]="{ 'background-color': this.avatarColors }">
            <div class="thumb-text" style="font-size: .5em;">
                {{userData.email?.toUpperCase().substring(0, 1)}}
            </div>
        </div>
    </div>
    <p>{{userData?.email}}</p>
    <!-- <input *ngIf="isEditing" [(ngModel)]="userData.email" />

    <a aria-label="Edit">
        <i class="las la-edit" *ngIf="!isEditing" (click)="toggleEditMode()"></i>
        <i class="las la-check-square" *ngIf="isEditing" (click)="submitEditedEmail()"></i>
    </a>
    -->
</div>
<div class="login-card-body" *ngIf="!isPasswordChanged">
    <form [formGroup]="forgetForm" (ngSubmit)="onConfirmSubmit(this.forgetForm?.value)">
        <div class="login-card-row">
            <div class="login-card-field">
                <div class="login-card-fieldRow">
                    <label for="password">{{ "New Password" | translate }} *</label>
                </div>
                <input type="password" name="password" autocomplete="off"
                    [formControl]="forgetForm?.controls['password']"
                    [class.invalid]="forgetForm?.controls.password.touched && forgetForm?.controls.password.errors">
            </div>
        </div>
        <div class="login-card-row">
            <div class="login-card-field">
                <div class="login-card-fieldRow">
                    <label for="cpassword">{{ "Confirm Password" | translate }} *</label>
                </div>
                <input type="password" name="cpassword" autocomplete="off"
                    [formControl]="forgetForm?.controls['confirmPassword']"
                    [class.invalid]="forgetForm?.controls.confirmPassword.touched && forgetForm?.controls.confirmPassword.errors">
            </div>
        </div>

        <div *ngIf="withVerification">
            <app-verify-code [email]="userData?.email" (CanUpdatePassword)="canUpdatePassword" (CanResendPassword)="canResendPassword" (VerificationCode)="setVerifyCode($event)" (OutputMessage)="setOutputMessage($event)"></app-verify-code>
               
            <button type="submit"
            [class.disabled]="!forgetForm?.valid || forgetForm.value.password !== forgetForm.value.confirmPassword || !canUpdatePassword || !canResendPassword">
            <span *ngIf=" !this.btnSubmitLoader">
                {{'Update' | translate}}
            </span>

            <span *ngIf="this.btnSubmitLoader">
                <span class="spinner-border spinner-border-sm"></span>
            </span>
        </button>
        </div>

        <button type="submit" *ngIf="!withVerification"
            [class.disabled]="!forgetForm?.valid || forgetForm.value.password !== forgetForm.value.confirmPassword">
            <span *ngIf=" !this.btnSubmitLoader">
                {{'Update' | translate}}
            </span>

            <span *ngIf="this.btnSubmitLoader">
                <span class="spinner-border spinner-border-sm"></span>
            </span>
        </button>

    </form>
</div>


<div class="login-card-body" *ngIf="isPasswordChanged">
    <div class="login-card-row" style="display: flex; justify-content: center;">
        <i class="las la-check-circle" aria-hidden="true" style="font-size: 5rem;"></i>
    </div>
    <div class="login-card-row" style="text-align: center;">
        <h4>{{ "Successfully Changed" | translate }}</h4>
    </div>
    <div class="login-card-row" style="text-align: center;" >
        <p>{{ "Your old password has been changed!" | translate }}</p>
    </div>
</div>